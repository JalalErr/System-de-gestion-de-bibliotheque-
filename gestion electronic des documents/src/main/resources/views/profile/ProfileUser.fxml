<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>


<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.usermanager.controller.UserController"
            stylesheets="@../../css/profilestyle.css"
            styleClass="root-pane">

    <!-- Sidebar Navigation (identique au dashboard) -->
    <left>
        <fx:include source="../SidebarMenuUser.fxml" fx:id="sidebar"/>

    </left>

    <!-- Main Content Area -->
    <center>
        <VBox styleClass="main-content">
            <!-- Header Bar -->
            <HBox styleClass="header-bar" alignment="CENTER_RIGHT" spacing="15">
                <HBox HBox.hgrow="ALWAYS"/>

                <!-- Search Bar -->
                <TextField fx:id="searchField" promptText="Search"
                           styleClass="search-field" prefWidth="400"/>
            </HBox>

            <!-- Profile Content Section -->
            <ScrollPane styleClass="content-scroll" fitToWidth="true" VBox.vgrow="ALWAYS">
                <VBox styleClass="profile-content" spacing="25">

                    <!-- Page Title -->
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label text="My Profile" styleClass="page-title"/>
                    </HBox>

                    <!-- Profile Header Card -->
                    <HBox styleClass="profile-header-card" spacing="30" alignment="CENTER_LEFT">
                        <!-- Avatar Section -->
                        <VBox alignment="CENTER" spacing="15">
                            <StackPane styleClass="profile-avatar-container">
                                <Circle radius="70" styleClass="profile-avatar-circle"/>
                                <ImageView fitWidth="135" fitHeight="135" preserveRatio="true">
                                    <image>
                                        <!-- <Image url="@images/user-avatar.png"/> -->
                                    </image>
                                    <clip>
                                        <Circle radius="67.5" centerX="67.5" centerY="67.5"/>
                                    </clip>
                                </ImageView>
                                <!-- Edit Avatar Button -->
                                <StackPane styleClass="edit-avatar-btn" StackPane.alignment="BOTTOM_RIGHT"
                                           translateX="-10" translateY="-10">
                                    <Circle radius="18" styleClass="edit-btn-circle"/>
                                    <Label text="ðŸ“·" styleClass="edit-btn-icon"/>
                                </StackPane>
                            </StackPane>
                            <Button text="Upload Photo" styleClass="upload-photo-btn" fx:id="uploadPhotoBtn"/>
                        </VBox>

                        <!-- User Info Section -->
                        <VBox spacing="12" HBox.hgrow="ALWAYS">
                            <Label fx:id="profileNameLabel" text="Nirmal Kumar P" styleClass="profile-header-name"/>
                            <Label fx:id="profileEmailLabel" text="nirmalkumar10@gmail.com" styleClass="profile-header-email"/>
                        </VBox>
                    </HBox>

                    <!-- Two Column Layout -->
                    <HBox spacing="25" alignment="TOP_LEFT">

                        <!-- Left Column: Personal Information -->
                        <VBox spacing="20" styleClass="info-section" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label text="Personal Information" styleClass="section-title"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Button text="âœï¸ Edit" styleClass="edit-section-btn" fx:id="editPersonalBtn"/>
                            </HBox>

                            <VBox spacing="18" styleClass="form-fields">
                                <!-- Full Name -->
                                <VBox spacing="8">
                                    <Label text="Full Name" styleClass="field-label"/>
                                    <TextField fx:id="fullNameField" text="Nirmal Kumar P"
                                               styleClass="profile-field" disable="true"/>
                                </VBox>

                                <!-- Email -->
                                <VBox spacing="8">
                                    <Label text="Email Address" styleClass="field-label"/>
                                    <TextField fx:id="emailField" text="nirmalkumar10@gmail.com"
                                               styleClass="profile-field" disable="true"/>
                                </VBox>

                                <!-- Phone -->
                                <VBox spacing="8">
                                    <Label text="Phone Number" styleClass="field-label"/>
                                    <TextField fx:id="phoneField" text="+212 6 12 34 56 78"
                                               styleClass="profile-field" disable="true"/>
                                </VBox>

                                <!-- Company -->
                                <VBox spacing="8">
                                    <Label text="Company" styleClass="field-label"/>
                                    <TextField fx:id="companyField" text="Tech Solutions Inc."
                                               styleClass="profile-field" disable="true"/>
                                </VBox>

                                <!-- Role -->
                                <VBox spacing="8">
                                    <Label text="Job Role" styleClass="field-label"/>
                                    <ComboBox fx:id="roleComboBox" styleClass="profile-combo"
                                              disable="true" prefWidth="300">
                                        <items>
                                            <javafx.collections.FXCollections fx:factory="observableArrayList">
                                                <!--<String fx:value="Manager"/>
                                                <String fx:value="Administrator"/>
                                                <String fx:value="Sales Representative"/>
                                                <String fx:value="Warehouse Staff"/> -->
                                            </javafx.collections.FXCollections>
                                        </items>
                                        <value>
                                            <!--<String fx:value="Manager"/>-->
                                        </value>
                                    </ComboBox>
                                </VBox>

                                <!-- Save Button (hidden by default) -->
                                <HBox spacing="15" fx:id="savePersonalBox" visible="false" managed="false">
                                    <Button text="Save Changes" styleClass="btn-save" fx:id="savePersonalBtn"/>
                                    <Button text="Cancel" styleClass="btn-cancel" fx:id="cancelPersonalBtn"/>
                                </HBox>
                            </VBox>
                        </VBox>

                        <!-- Right Column: Account Settings -->
                        <VBox spacing="20" styleClass="info-section" HBox.hgrow="ALWAYS">

                            <!-- Security Section -->
                            <VBox spacing="15">
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label text="Security" styleClass="section-title"/>
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <Button text="âœï¸ Edit" styleClass="edit-section-btn" fx:id="editSecurityBtn"/>
                                </HBox>

                                <VBox spacing="18" styleClass="form-fields">
                                    <!-- Current Password -->
                                    <VBox spacing="8" fx:id="passwordFieldsBox" visible="false" managed="false">
                                        <Label text="Current Password" styleClass="field-label"/>
                                        <PasswordField fx:id="currentPasswordField"
                                                       promptText="Enter current password"
                                                       styleClass="profile-field"/>
                                    </VBox>

                                    <!-- New Password -->
                                    <VBox spacing="8" fx:id="newPasswordBox" visible="false" managed="false">
                                        <Label text="New Password" styleClass="field-label"/>
                                        <PasswordField fx:id="newPasswordField"
                                                       promptText="Enter new password"
                                                       styleClass="profile-field"/>
                                    </VBox>

                                    <!-- Confirm Password -->
                                    <VBox spacing="8" fx:id="confirmPasswordBox" visible="false" managed="false">
                                        <Label text="Confirm Password" styleClass="field-label"/>
                                        <PasswordField fx:id="confirmPasswordField"
                                                       promptText="Confirm new password"
                                                       styleClass="profile-field"/>
                                    </VBox>

                                    <!-- Password Info (shown by default) -->
                                    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="password-info"
                                          fx:id="passwordInfoBox">
                                        <Label text="ðŸ”’" styleClass="info-icon"/>
                                        <VBox>
                                            <Label text="Password" styleClass="info-title"/>
                                            <Label text="Last changed: 2 months ago" styleClass="info-subtitle"/>
                                        </VBox>
                                    </HBox>

                                    <!-- Save Security Button -->
                                    <HBox spacing="15" fx:id="saveSecurityBox" visible="false" managed="false">
                                        <Button text="Update Password" styleClass="btn-save" fx:id="saveSecurityBtn"/>
                                        <Button text="Cancel" styleClass="btn-cancel" fx:id="cancelSecurityBtn"/>
                                    </HBox>
                                </VBox>
                            </VBox>

                            <!-- Preferences Section -->
                            <VBox spacing="15">
                                <Label text="Preferences" styleClass="section-title"/>

                                <VBox spacing="15" styleClass="preferences-list">
                                    <!-- Email Notifications -->
                                    <HBox alignment="CENTER_LEFT" spacing="15" styleClass="preference-item">
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Label text="Email Notifications" styleClass="pref-title"/>
                                            <Label text="Receive updates about your orders" styleClass="pref-subtitle"/>
                                        </VBox>
                                        <CheckBox fx:id="emailNotifToggle" selected="true" styleClass="toggle-switch"/>
                                    </HBox>

                                    <!-- Push Notifications -->
                                    <HBox alignment="CENTER_LEFT" spacing="15" styleClass="preference-item">
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Label text="Push Notifications" styleClass="pref-title"/>
                                            <Label text="Real-time alerts on your device" styleClass="pref-subtitle"/>
                                        </VBox>
                                        <CheckBox fx:id="pushNotifToggle" selected="true" styleClass="toggle-switch"/>
                                    </HBox>

                                    <!-- Dark Mode -->
                                    <HBox alignment="CENTER_LEFT" spacing="15" styleClass="preference-item">
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Label text="Dark Mode" styleClass="pref-title"/>
                                            <Label text="Switch to dark theme" styleClass="pref-subtitle"/>
                                        </VBox>
                                        <CheckBox fx:id="darkModeToggle" selected="false" styleClass="toggle-switch"/>
                                    </HBox>
                                </VBox>
                            </VBox>

                            <!-- Danger Zone -->
                            <VBox spacing="15" styleClass="danger-zone">
                                <Label text="Danger Zone" styleClass="section-title-danger"/>
                                <Button text="Delete Account" styleClass="btn-danger" fx:id="deleteAccountBtn"/>
                                <Label text="Once you delete your account, there is no going back."
                                       styleClass="danger-warning"/>
                            </VBox>

                        </VBox>

                    </HBox>

                </VBox>
            </ScrollPane>

        </VBox>
    </center>

</BorderPane>