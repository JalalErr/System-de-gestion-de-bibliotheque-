<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.usermanager.controller.AddUserController"
            prefHeight="400.0" prefWidth="600.0">

    <!-- Import Sidebar Component -->
    <left>
        <fx:include source="../SidebarMenuAdmin.fxml" fx:id="sidebar"/>
    </left>

<!-- Main Content Area -->
<center>
    <VBox styleClass="main-content">
        <!-- Header Bar -->
        <HBox styleClass="header-bar" alignment="CENTER_RIGHT" spacing="15">
            <HBox HBox.hgrow="ALWAYS"/>

            <!-- Search Bar -->
            <TextField fx:id="globalSearchField" promptText="Search"
                       styleClass="search-field" prefWidth="400"/>

            <!-- Action Icons -->
            <Button styleClass="icon-button" text="â˜€ï¸"/>
            <Button styleClass="icon-button" text="ðŸŒ™"/>
            <Button styleClass="icon-button" text="ðŸ””"/>
        </HBox>

        <!-- Users Management Section -->
        <VBox styleClass="content-section" VBox.vgrow="ALWAYS">

            <!-- Section Header -->
            <HBox styleClass="section-header" alignment="CENTER_LEFT" spacing="20">
                <Label text="Liste des Utilisateurs" styleClass="section-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="âž• Nouvel Utilisateur" styleClass="add-user-btn"
                        fx:id="addUserBtn"/>
                <Button text="ðŸ“¥ Exporter" styleClass="export-btn" fx:id="exportBtn"/>
            </HBox>

            <!-- Search and Filter Bar -->
            <VBox styleClass="search-filter-section" spacing="15">

                <!-- Search Box -->
                <HBox spacing="15" alignment="CENTER_LEFT">
                    <HBox styleClass="search-box" HBox.hgrow="ALWAYS">
                        <Label text="ðŸ”" styleClass="search-icon"/>
                        <TextField fx:id="userSearchField"
                                   promptText="Rechercher par nom, prÃ©nom, email ou tÃ©lÃ©phone..."
                                   styleClass="user-search-input"
                                   HBox.hgrow="ALWAYS"/>
                        <Button text="âœ•" styleClass="clear-search-btn"
                                fx:id="clearSearchBtn" visible="false"/>
                    </HBox>

                    <Button text="ðŸ” Rechercher" styleClass="search-button"
                            fx:id="searchBtn"/>
                </HBox>

                <!-- Filters and Stats Row -->
                <HBox styleClass="filter-stats-bar" alignment="CENTER_LEFT" spacing="20">
                    <!-- Filter Tabs -->
                    <HBox spacing="10" styleClass="tab-group" HBox.hgrow="ALWAYS">
                        <Button text="Tous" styleClass="filter-tab, active-tab"
                                fx:id="allUsersTab"/>
                        <Button text="Actifs" styleClass="filter-tab"
                                fx:id="activeUsersTab"/>
                        <Button text="Inactifs" styleClass="filter-tab"
                                fx:id="inactiveUsersTab"/>
                    </HBox>

                    <!-- Role Filter -->
                    <ComboBox fx:id="roleFilterCombo"
                              promptText="Filtrer par rÃ´le"
                              styleClass="filter-combo"
                              prefWidth="180">
                        <items>
                            <javafx.collections.FXCollections fx:factory="observableArrayList">
                                <String fx:value="Tous les rÃ´les"/>
                                <String fx:value="Administrateur"/>
                                <String fx:value="Manager"/>
                                <String fx:value="Utilisateur"/>
                                <String fx:value="InvitÃ©"/>
                            </javafx.collections.FXCollections>
                        </items>
                    </ComboBox>

                    <!-- Stats Display -->
                    <HBox spacing="15" alignment="CENTER_RIGHT">
                        <VBox alignment="CENTER" spacing="2">
                            <Label fx:id="totalUsersLabel" text="0" styleClass="stat-number"/>
                            <Label text="Total" styleClass="stat-label"/>
                        </VBox>
                        <Separator orientation="VERTICAL" prefHeight="30"/>
                        <VBox alignment="CENTER" spacing="2">
                            <Label fx:id="activeUsersLabel" text="0" styleClass="stat-number"/>
                            <Label text="Actifs" styleClass="stat-label"/>
                        </VBox>
                        <Separator orientation="VERTICAL" prefHeight="30"/>
                        <VBox alignment="CENTER" spacing="2">
                            <Label fx:id="filteredCountLabel" text="0" styleClass="stat-number-highlight"/>
                            <Label text="AffichÃ©s" styleClass="stat-label"/>
                        </VBox>
                    </HBox>
                </HBox>

                <!-- Search Results Info -->
                <HBox fx:id="searchResultsBox" styleClass="search-results-info"
                      visible="false" managed="false" alignment="CENTER_LEFT" spacing="10">
                    <Label text="ðŸ”" styleClass="result-icon"/>
                    <Label fx:id="searchResultsLabel"
                           text="5 rÃ©sultats trouvÃ©s pour 'Jean'"
                           styleClass="result-text"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Hyperlink text="Effacer la recherche"
                               styleClass="clear-search-link"
                               fx:id="clearSearchLink"/>
                </HBox>

            </VBox>

            <!-- Users Table -->
            <TableView fx:id="usersTable" styleClass="users-table" VBox.vgrow="ALWAYS">
                <columns>
                    <!-- Avatar Column -->
                    <TableColumn text="ðŸ‘¤" prefWidth="60" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="avatar"/>
                        </cellValueFactory>
                    </TableColumn>

                    <!-- ID Column -->
                    <TableColumn text="ID" prefWidth="60" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="id"/>
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Full Name Column -->
                    <TableColumn text="Nom Complet" prefWidth="200" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="fullName"/>
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Email Column -->
                    <TableColumn text="Email" prefWidth="220" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="email"/>
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Phone Column -->
                    <TableColumn text="TÃ©lÃ©phone" prefWidth="140" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="phone"/>
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Role Column -->
                    <TableColumn text="RÃ´le" prefWidth="130" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="role"/>
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Department Column -->
                    <TableColumn text="DÃ©partement" prefWidth="150" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="department"/>
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Status Column -->
                    <TableColumn text="Statut" prefWidth="100" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="status"/>
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Join Date Column -->
                    <TableColumn text="Date d'inscription" prefWidth="140" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="joinDate"/>
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Actions Column -->
                    <TableColumn text="Actions" prefWidth="150" styleClass="table-column">
                        <cellValueFactory>
                            <javafx.scene.control.cell.PropertyValueFactory property="actions"/>
                        </cellValueFactory>
                    </TableColumn>
                </columns>

                <!-- Empty State Placeholder -->
                <placeholder>
                    <VBox alignment="CENTER" spacing="15" styleClass="empty-state">
                        <Label text="ðŸ”" styleClass="empty-icon"/>
                        <Label text="Aucun utilisateur trouvÃ©" styleClass="empty-title"/>
                        <Label text="Essayez de modifier vos critÃ¨res de recherche"
                               styleClass="empty-subtitle"/>
                    </VBox>
                </placeholder>
            </TableView>

            <!-- Pagination and Info Bar -->
            <HBox styleClass="pagination-info-bar" alignment="CENTER" spacing="20">
                <!-- Items per page selector -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Afficher" styleClass="pagination-label"/>
                    <ComboBox fx:id="itemsPerPageCombo"
                              styleClass="items-per-page-combo"
                              prefWidth="80">
                        <items>
                            <javafx.collections.FXCollections fx:factory="observableArrayList">
                                <String fx:value="10"/>
                                <String fx:value="25"/>
                                <String fx:value="50"/>
                                <String fx:value="100"/>
                            </javafx.collections.FXCollections>
                        </items>
                        <value>
                            <String fx:value="25"/>
                        </value>
                    </ComboBox>
                    <Label text="par page" styleClass="pagination-label"/>
                </HBox>

                <!-- Pagination Info -->
                <Label fx:id="paginationInfoLabel"
                       text="Affichage de 1-25 sur 156 utilisateurs"
                       styleClass="pagination-info"/>

                <Region HBox.hgrow="ALWAYS"/>

                <!-- Pagination Controls -->
                <HBox spacing="10" alignment="CENTER">
                    <Button text="â®â®" styleClass="pagination-button"
                            fx:id="firstPageBtn" tooltip="PremiÃ¨re page"/>
                    <Button text="â®" styleClass="pagination-button"
                            fx:id="prevPageBtn" tooltip="Page prÃ©cÃ©dente"/>

                    <HBox fx:id="pageNumbersBox" spacing="5">
                        <Button text="1" styleClass="pagination-button, active-page"/>
                        <Button text="2" styleClass="pagination-button"/>
                        <Button text="3" styleClass="pagination-button"/>
                        <Label text="..." styleClass="pagination-ellipsis"/>
                        <Button text="7" styleClass="pagination-button"/>
                    </HBox>

                    <Button text="â¯" styleClass="pagination-button"
                            fx:id="nextPageBtn" tooltip="Page suivante"/>
                    <Button text="â¯â¯" styleClass="pagination-button"
                            fx:id="lastPageBtn" tooltip="DerniÃ¨re page"/>
                </HBox>
            </HBox>

        </VBox>
    </VBox>
</center>

</BorderPane>
